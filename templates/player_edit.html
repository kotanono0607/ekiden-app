{% extends "base.html" %}

{% block title %}{{ player.name }} - 編集 - 駅伝アプリ{% endblock %}

{% block content %}
<nav aria-label="breadcrumb" class="mb-4">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="/">選手一覧</a></li>
        <li class="breadcrumb-item"><a href="/player/{{ player.id }}">{{ player.name }}</a></li>
        <li class="breadcrumb-item active">編集</li>
    </ol>
</nav>

<div class="row justify-content-center">
    <div class="col-md-10 col-lg-8">
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0"><i class="bi bi-pencil text-primary"></i> 選手情報の編集</h5>
            </div>
            <div class="card-body">
                <form action="/player/{{ player.id }}/edit" method="POST">
                    <div class="row">
                        <!-- 基本情報 -->
                        <div class="col-12">
                            <h6 class="text-muted mb-3"><i class="bi bi-person"></i> 基本情報</h6>
                        </div>

                        <!-- 氏名 -->
                        <div class="col-md-6 mb-3">
                            <label for="name" class="form-label">氏名 <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="name" name="name" required
                                   value="{{ player.name }}">
                        </div>

                        <!-- 所属 -->
                        <div class="col-md-6 mb-3">
                            <label for="group" class="form-label">所属 <span class="text-danger">*</span></label>
                            <select class="form-select" id="group" name="group" required>
                                <option value="">所属を選択してください</option>
                                <option value="Aチーム" {% if player.group == 'Aチーム' %}selected{% endif %}>Aチーム</option>
                                <option value="Bチーム" {% if player.group == 'Bチーム' %}selected{% endif %}>Bチーム</option>
                                <option value="中学生" {% if player.group == '中学生' %}selected{% endif %}>中学生</option>
                                <option value="マネージャー" {% if player.group == 'マネージャー' %}selected{% endif %}>マネージャー</option>
                            </select>
                        </div>

                        <!-- 学年 -->
                        <div class="col-md-6 mb-3">
                            <label for="grade" class="form-label">学年</label>
                            <select class="form-select" id="grade" name="grade">
                                <option value="">選択してください</option>
                                <option value="1年" {% if player.grade == '1年' %}selected{% endif %}>1年</option>
                                <option value="2年" {% if player.grade == '2年' %}selected{% endif %}>2年</option>
                                <option value="3年" {% if player.grade == '3年' %}selected{% endif %}>3年</option>
                                <option value="4年" {% if player.grade == '4年' %}selected{% endif %}>4年</option>
                                <option value="OB/OG" {% if player.grade == 'OB/OG' %}selected{% endif %}>OB/OG</option>
                            </select>
                        </div>

                        <!-- 出身校 -->
                        <div class="col-md-6 mb-3">
                            <label for="school" class="form-label">出身校</label>
                            <input type="text" class="form-control" id="school" name="school"
                                   value="{{ player.school or '' }}">
                        </div>

                        <!-- ステータス -->
                        <div class="col-md-6 mb-3">
                            <label for="active" class="form-label">ステータス</label>
                            <select class="form-select" id="active" name="active">
                                <option value="TRUE" {% if player.active == 'TRUE' or player.active == True %}selected{% endif %}>現役</option>
                                <option value="FALSE" {% if player.active == 'FALSE' or player.active == False %}selected{% endif %}>引退</option>
                            </select>
                        </div>

                        <hr class="my-4">

                        <!-- 身体情報 -->
                        <div class="col-12">
                            <h6 class="text-muted mb-3"><i class="bi bi-heart-pulse"></i> 身体情報</h6>
                        </div>

                        <!-- 身長 -->
                        <div class="col-md-6 mb-3">
                            <label for="height" class="form-label">身長</label>
                            <div class="input-group">
                                <input type="number" class="form-control" id="height" name="height"
                                       value="{{ player.height or '' }}" min="100" max="220">
                                <span class="input-group-text">cm</span>
                            </div>
                        </div>

                        <!-- 体重 -->
                        <div class="col-md-6 mb-3">
                            <label for="weight" class="form-label">体重</label>
                            <div class="input-group">
                                <input type="number" class="form-control" id="weight" name="weight"
                                       value="{{ player.weight or '' }}" min="30" max="150">
                                <span class="input-group-text">kg</span>
                            </div>
                        </div>

                        <hr class="my-4">

                        <!-- 記録情報 -->
                        <div class="col-12">
                            <h6 class="text-muted mb-3"><i class="bi bi-stopwatch"></i> 記録情報</h6>
                        </div>

                        <!-- 5000m自己ベスト -->
                        <div class="col-md-6 mb-3">
                            <label for="best_5000m" class="form-label">5000m自己ベスト</label>
                            <div class="input-group">
                                <input type="text" class="form-control" id="best_5000m" name="best_5000m"
                                       value="{{ player.best_5000m or '' }}" pattern="[0-9]{1,2}:[0-9]{2}">
                                <span class="input-group-text"><i class="bi bi-clock"></i></span>
                            </div>
                        </div>

                        <!-- 目標タイム -->
                        <div class="col-md-6 mb-3">
                            <label for="target_time" class="form-label">目標タイム</label>
                            <div class="input-group">
                                <input type="text" class="form-control" id="target_time" name="target_time"
                                       value="{{ player.target_time or '' }}" pattern="[0-9]{1,2}:[0-9]{2}">
                                <span class="input-group-text"><i class="bi bi-bullseye"></i></span>
                            </div>
                        </div>

                        <hr class="my-4">

                        <!-- その他 -->
                        <div class="col-12">
                            <h6 class="text-muted mb-3"><i class="bi bi-chat-quote"></i> その他</h6>
                        </div>

                        <!-- 写真URL -->
                        <div class="col-12 mb-3">
                            <label for="photo_url" class="form-label">プロフィール写真URL</label>
                            <input type="url" class="form-control" id="photo_url" name="photo_url"
                                   value="{{ player.photo_url or '' }}">
                            <div class="form-text">Google DriveやImgurなどの画像URLを入力</div>
                        </div>

                        <!-- 意気込み -->
                        <div class="col-12 mb-4">
                            <label for="message" class="form-label">意気込み</label>
                            <textarea class="form-control" id="message" name="message" rows="3">{{ player.message or '' }}</textarea>
                        </div>
                    </div>

                    <!-- 送信ボタン -->
                    <div class="d-grid gap-2">
                        <button type="submit" class="btn btn-primary btn-lg">
                            <i class="bi bi-check-circle"></i> 更新する
                        </button>
                        <a href="/player/{{ player.id }}" class="btn btn-outline-secondary">
                            <i class="bi bi-arrow-left"></i> 戻る
                        </a>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}
